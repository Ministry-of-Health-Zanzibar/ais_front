<div class="form-container">
  <div class="w-full">
    <div class="relative h-full rounded-lg group p-6">
      <div class="font-semibold" *ngIf="!userData"> UPDATE USER</div>
      <div class="font-semibold" *ngIf="userData"> CREATE NEW USER</div>
      <form [formGroup]="userForm" class="horizontal-form">

        <!-- Row 1: First Name, Middle Name -->
        <div class="form-row">
          <mat-form-field class="form-field">
            <mat-label>First Name</mat-label>
            <input matInput placeholder="Ex. ALI" formControlName="first_name" type="text">
            <mat-error *ngIf="userForm.controls['first_name'].touched && userForm.controls['first_name'].invalid">
              <span *ngIf="userForm.controls['first_name'].errors?.['required']">This field is mandatory</span>
              <span *ngIf="userForm.controls['first_name'].errors?.['pattern']">Must contain alphabetical characters only</span>
            </mat-error>
          </mat-form-field>

          <mat-form-field class="form-field">
            <mat-label>Middle Name</mat-label>
            <input matInput placeholder="Ex. JUMA" formControlName="middle_name" type="text">
            <mat-error *ngIf="userForm.controls['middle_name'].touched && userForm.controls['middle_name'].invalid">
              <span *ngIf="userForm.controls['middle_name'].errors?.['required']">This field is mandatory</span>
              <span *ngIf="userForm.controls['middle_name'].errors?.['pattern']">Must contain alphabetical characters only</span>
            </mat-error>
          </mat-form-field>
        </div>

        <!-- Row 2: Last Name, Address -->
        <div class="form-row">
          <mat-form-field class="form-field">
            <mat-label>Last Name</mat-label>
            <input matInput placeholder="Ex. HAJI" formControlName="last_name" type="text">
            <mat-error *ngIf="userForm.controls['last_name'].touched && userForm.controls['last_name'].invalid">
              <span *ngIf="userForm.controls['last_name'].errors?.['required']">This field is mandatory</span>
              <span *ngIf="userForm.controls['last_name'].errors?.['pattern']">Must contain alphabetical characters only</span>
            </mat-error>
          </mat-form-field>

          <mat-form-field class="form-field">
            <mat-label>Address</mat-label>
            <input matInput placeholder="Ex. FUONI" formControlName="address" type="text">
            <mat-error *ngIf="userForm.controls['address'].touched && userForm.controls['address'].invalid">
              <span *ngIf="userForm.controls['address'].errors?.['required']">This field is mandatory</span>
            </mat-error>
          </mat-form-field>
        </div>

        <!-- Row 3: Email, Phone Number -->
        <div class="form-row">
          <mat-form-field class="form-field">
            <mat-label>Email</mat-label>
            <input matInput placeholder="Ex. abd@gmail.com" formControlName="email" type="text">
            <mat-error *ngIf="userForm.controls['email'].touched && userForm.controls['email'].invalid">
              <span *ngIf="userForm.controls['email'].errors?.['required']">This field is mandatory</span>
              <span *ngIf="userForm.controls['email'].errors?.['pattern']">This field is invalid (email is incorrect)</span>
            </mat-error>
          </mat-form-field>

          <mat-form-field class="form-field">
            <mat-label>Phone Number</mat-label>
            <input matInput placeholder="Ex. +255 777000000" formControlName="phone_no" type="text">
            <mat-error *ngIf="userForm.controls['phone_no'].touched && userForm.controls['phone_no'].invalid">
              <span *ngIf="userForm.controls['phone_no'].errors?.['required']">This field is mandatory</span>
              <!-- <span *ngIf="userForm.controls['phone_no'].errors?.['pattern']">Must start +255 and 9 digits</span> -->
            </mat-error>
          </mat-form-field>
        </div>

        <!-- Row 4: Location, WorkStation -->
        <!-- <div class="form-row">
          <mat-form-field class="form-field">
            <mat-label>Location</mat-label>
            <input type="text" matInput placeholder="public" formControlName="location_id" [matAutocomplete]="auto">
            <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
              <mat-option *ngFor="let option of filteredOptions | async; trackBy: trackById" [value]="option">
                {{ option.location_name }}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field> -->

          <!-- <mat-form-field class="form-field">
            <mat-label>Working Team</mat-label>
            <mat-select formControlName="team_id">
              <mat-option *ngFor="let work of workStation" [value]="work.team_id">
                {{ work.team_name }}
              </mat-option>
            </mat-select>
          </mat-form-field> -->

   <!-- </div> -->
        <!-- Row 5: Role, Gender -->
        <div class="form-row">
          <mat-form-field class="form-field">
            <mat-label>Role</mat-label>
            <mat-select formControlName="role_id">
              <mat-option *ngFor="let role of roles" [value]="role.id">
                {{ role.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field class="form-field">
            <mat-label>Gender</mat-label>
            <mat-select formControlName="gender">
              <mat-option value="Male">Male</mat-option>
              <mat-option value="Female">Female</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <!-- Row 6: Date of Birth -->
        <div class="form-row">
          <mat-form-field class="form-field">
            <mat-label>Date of Birth</mat-label>
            <input matInput [matDatepicker]="picker" formControlName="date_of_birth" placeholder="Choose a date">
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
            <mat-error *ngIf="userForm.controls['date_of_birth'].touched && userForm.controls['date_of_birth'].invalid">
              <span *ngIf="userForm.controls['date_of_birth'].errors?.['required']">This field is mandatory</span>
            </mat-error>
          </mat-form-field>
        </div>

      </form>
    </div>

    <mat-dialog-actions align="end">
      <button mat-button mat-dialog-close>Cancel</button>
      <button mat-flat-button [mat-dialog-close]="true" *ngIf="!userData" cdkFocusInitial [disabled]="userForm.invalid" (click)="saveUser()">Save Data</button>
      <button mat-flat-button [mat-dialog-close]="true" *ngIf="userData" cdkFocusInitial [disabled]="userForm.invalid" (click)="updateUser()">Update Data</button>
    </mat-dialog-actions>
  </div>
  </div>

